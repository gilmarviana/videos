# StreamFlix - Plataforma de Streaming

Uma plataforma de streaming completa como o Netflix, desenvolvida com React, Vite e Supabase.

## üé¨ Caracter√≠sticas

- **Interface moderna**: Design responsivo inspirado no Netflix
- **Sistema de autentica√ß√£o**: Login/registro com Supabase Auth
- **Planos de assinatura**: B√°sico e VIP com diferentes permiss√µes
- **Player de v√≠deo universal**: Suporte a m√∫ltiplas fontes de v√≠deo
- **Painel administrativo**: Gerenciamento completo de conte√∫do
- **PWA**: Aplica√ß√£o Progressive Web App para instala√ß√£o
- **Responsivo**: Otimizado para desktop e mobile

## üöÄ Funcionalidades

### Para Usu√°rios
- ‚úÖ Cadastro e login de usu√°rios
- ‚úÖ Escolha de planos de assinatura (B√°sico/VIP)
- ‚úÖ Navega√ß√£o por categorias (Filmes, S√©ries, Canais, VIP)
- ‚úÖ Busca de conte√∫do
- ‚úÖ Player de v√≠deo com controles personalizados
- ‚úÖ Hist√≥rico de visualiza√ß√£o
- ‚úÖ Interface responsiva

### Para Administradores
- ‚úÖ Painel administrativo completo
- ‚úÖ Gerenciamento de v√≠deos (CRUD)
- ‚úÖ Gerenciamento de categorias
- ‚úÖ Controle de acesso por plano
- ‚úÖ Estat√≠sticas em tempo real
- ‚úÖ Upload de m√∫ltiplas fontes de v√≠deo

### Fontes de V√≠deo Suportadas
- üé• **YouTube** - Links diretos e embeds
- üíæ **Google Drive** - Arquivos hospedados no Drive
- ‚òÅÔ∏è **OneDrive** - Arquivos da Microsoft
- üé¨ **Vimeo** - V√≠deos do Vimeo
- üêº **Panda Video** - Plataforma Panda
- üìπ **Arquivos diretos** - MP4, MKV, TS, AVI, MOV, WebM

## üõ†Ô∏è Tecnologias

- **Frontend**: React 19, Vite, TailwindCSS
- **Backend**: Supabase (PostgreSQL, Auth, Storage)
- **Roteamento**: React Router v7
- **Estado**: React Context API
- **√çcones**: Heroicons
- **PWA**: Service Workers, Web App Manifest

## üì¶ Instala√ß√£o

### Pr√©-requisitos
- Node.js 18+ 
- npm ou yarn
- Conta no Supabase

### 1. Clone o reposit√≥rio
```bash
git clone https://github.com/seu-usuario/streamflix.git
cd streamflix
```

### 2. Instale as depend√™ncias
```bash
npm install
```

### 3. Configure o Supabase

1. Crie um projeto no [Supabase](https://supabase.com)
2. Copie o arquivo `.env.example` para `.env`
3. Adicione suas credenciais:

```env
VITE_SUPABASE_URL=sua_url_do_supabase
VITE_SUPABASE_ANON_KEY=sua_chave_anonima
```

### 4. Configure o banco de dados

Execute o SQL fornecido no final desta documenta√ß√£o no editor SQL do Supabase.

### 5. Execute o projeto
```bash
npm run dev
```

O projeto estar√° dispon√≠vel em `http://localhost:5173`

## üóÑÔ∏è Estrutura do Projeto

```
src/
‚îú‚îÄ‚îÄ components/          # Componentes reutiliz√°veis
‚îÇ   ‚îú‚îÄ‚îÄ admin/          # Componentes do painel admin
‚îÇ   ‚îú‚îÄ‚îÄ auth/           # Componentes de autentica√ß√£o  
‚îÇ   ‚îú‚îÄ‚îÄ client/         # Componentes do cliente
‚îÇ   ‚îî‚îÄ‚îÄ shared/         # Componentes compartilhados
‚îú‚îÄ‚îÄ context/            # Contextos React
‚îú‚îÄ‚îÄ hooks/              # Hooks customizados
‚îú‚îÄ‚îÄ pages/              # P√°ginas da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ admin/          # P√°ginas administrativas
‚îÇ   ‚îú‚îÄ‚îÄ auth/           # P√°ginas de autentica√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ client/         # P√°ginas do cliente
‚îú‚îÄ‚îÄ services/           # Servi√ßos (Supabase, APIs)
‚îú‚îÄ‚îÄ utils/              # Utilit√°rios e helpers
‚îî‚îÄ‚îÄ types/              # Tipos TypeScript (se usar)
```

## üë• Usu√°rios Demo

Para testar o sistema, voc√™ pode criar usu√°rios demo:

**Administrador:**
- Email: admin@demo.com
- Senha: admin123
- Role: admin

**Cliente:**
- Email: user@demo.com  
- Senha: user123
- Role: client

## üéØ Como Usar

### Para Administradores

1. **Login**: Use as credenciais de admin
2. **Acessar painel**: Navegue para `/admin`
3. **Adicionar v√≠deos**: 
   - Clique em "Adicionar V√≠deo"
   - Cole a URL do v√≠deo (YouTube, Drive, etc.)
   - Preencha as informa√ß√µes
   - Defina se √© conte√∫do VIP
4. **Gerenciar categorias**: Crie e organize categorias
5. **Monitorar**: Veja estat√≠sticas na vis√£o geral

### Para Usu√°rios

1. **Registro**: Crie uma conta escolhendo um plano
2. **Login**: Entre com suas credenciais
3. **Navegar**: Use as categorias ou busca
4. **Assistir**: Clique em um v√≠deo para reproduzir
5. **Hist√≥rico**: Veja o que assistiu recentemente

## üîí Permiss√µes

### Plano B√°sico
- Acesso a conte√∫do b√°sico
- Qualidade HD
- 2 dispositivos simult√¢neos

### Plano VIP  
- Acesso a todo conte√∫do
- Conte√∫do VIP exclusivo
- Qualidade 4K
- 4 dispositivos simult√¢neos

## üì± PWA (Progressive Web App)

O StreamFlix √© uma PWA completa:

- **Instal√°vel**: Pode ser instalado no dispositivo
- **Offline**: Funciona sem internet (cache b√°sico)
- **Notifica√ß√µes**: Suporte a push notifications
- **Responsivo**: Adapta-se a qualquer tela

### Instala√ß√£o PWA

1. Abra o site no navegador
2. Clique no √≠cone de "Instalar app" na barra de endere√ßos
3. Confirme a instala√ß√£o
4. Use como app nativo!

## üîß Scripts Dispon√≠veis

```bash
# Desenvolvimento
npm run dev

# Build para produ√ß√£o
npm run build

# Preview da build
npm run preview

# Linting
npm run lint
```

## üöÄ Deploy

### Netlify/Vercel
1. Fa√ßa o build: `npm run build`
2. Suba a pasta `dist/`
3. Configure as vari√°veis de ambiente

### Configura√ß√µes necess√°rias
- Redirecionar todas as rotas para `index.html` (SPA)
- Configurar vari√°veis de ambiente do Supabase

## üé® Customiza√ß√£o

### Cores (TailwindCSS)
As cores do Netflix est√£o definidas em `tailwind.config.js`:

```js
netflix: {
  red: '#E50914',
  black: '#000000', 
  darkGray: '#141414',
  mediumGray: '#2F2F2F',
  lightGray: '#B3B3B3',
}
```

### Componentes
Todos os componentes seguem o padr√£o do design system do Netflix.

## ü§ù Contribuindo

1. Fork o projeto
2. Crie uma branch: `git checkout -b feature/nova-feature`
3. Commit: `git commit -m 'Adiciona nova feature'`
4. Push: `git push origin feature/nova-feature`
5. Abra um Pull Request

## üìù Licen√ßa

Este projeto √© licenciado sob a MIT License.

## üÜò Suporte

Para d√∫vidas ou problemas:
- Abra uma issue no GitHub
- Entre em contato: contato@streamflix.com

---

## üìä SQL do Banco de Dados

Execute este SQL no Supabase para configurar o banco:

```sql
-- Enable Row Level Security
ALTER TABLE auth.users ENABLE ROW LEVEL SECURITY;

-- Create profiles table
CREATE TABLE public.profiles (
    id UUID REFERENCES auth.users ON DELETE CASCADE PRIMARY KEY,
    email TEXT NOT NULL,
    full_name TEXT,
    avatar_url TEXT,
    role TEXT DEFAULT 'client' CHECK (role IN ('client', 'admin')),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create subscription_plans table
CREATE TABLE public.subscription_plans (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    name TEXT NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL,
    duration_type TEXT DEFAULT 'monthly' CHECK (duration_type IN ('monthly', 'quarterly', 'yearly')),
    includes_vip BOOLEAN DEFAULT false,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create subscriptions table
CREATE TABLE public.subscriptions (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
    plan_id UUID REFERENCES public.subscription_plans(id),
    active BOOLEAN DEFAULT true,
    started_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    expires_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create categories table
CREATE TABLE public.categories (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    name TEXT NOT NULL,
    description TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create videos table
CREATE TABLE public.videos (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    title TEXT NOT NULL,
    description TEXT,
    url TEXT NOT NULL,
    thumbnail_url TEXT,
    category_id UUID REFERENCES public.categories(id),
    is_vip BOOLEAN DEFAULT false,
    duration TEXT,
    release_year INTEGER,
    cast TEXT,
    director TEXT,
    genre TEXT,
    rating TEXT,
    trailer_url TEXT,
    active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Create watch_history table
CREATE TABLE public.watch_history (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,
    video_id UUID REFERENCES public.videos(id) ON DELETE CASCADE,
    watched_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(user_id, video_id)
);

-- RLS Policies

-- Profiles policies
CREATE POLICY "Public profiles are viewable by everyone" ON public.profiles FOR SELECT USING (true);
CREATE POLICY "Users can insert their own profile" ON public.profiles FOR INSERT WITH CHECK (auth.uid() = id);
CREATE POLICY "Users can update their own profile" ON public.profiles FOR UPDATE USING (auth.uid() = id);

-- Subscription plans policies  
CREATE POLICY "Subscription plans are viewable by everyone" ON public.subscription_plans FOR SELECT USING (active = true);

-- Subscriptions policies
CREATE POLICY "Users can view their own subscriptions" ON public.subscriptions FOR SELECT USING (auth.uid() = user_id);
CREATE POLICY "Users can insert their own subscriptions" ON public.subscriptions FOR INSERT WITH CHECK (auth.uid() = user_id);

-- Categories policies
CREATE POLICY "Categories are viewable by everyone" ON public.categories FOR SELECT USING (active = true);
CREATE POLICY "Only admins can manage categories" ON public.categories FOR ALL USING (
    EXISTS (
        SELECT 1 FROM public.profiles 
        WHERE profiles.id = auth.uid() AND profiles.role = 'admin'
    )
);

-- Videos policies
CREATE POLICY "Videos are viewable by everyone" ON public.videos FOR SELECT USING (active = true);
CREATE POLICY "Only admins can manage videos" ON public.videos FOR ALL USING (
    EXISTS (
        SELECT 1 FROM public.profiles 
        WHERE profiles.id = auth.uid() AND profiles.role = 'admin'
    )
);

-- Watch history policies
CREATE POLICY "Users can view their own watch history" ON public.watch_history FOR SELECT USING (auth.uid() = user_id);
CREATE POLICY "Users can insert their own watch history" ON public.watch_history FOR INSERT WITH CHECK (auth.uid() = user_id);
CREATE POLICY "Users can update their own watch history" ON public.watch_history FOR UPDATE USING (auth.uid() = user_id);

-- Enable RLS on all tables
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.subscription_plans ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.subscriptions ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.categories ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.videos ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.watch_history ENABLE ROW LEVEL SECURITY;

-- Insert default subscription plans
INSERT INTO public.subscription_plans (name, description, price, duration_type, includes_vip) VALUES
('B√°sico Mensal', 'Acesso ao cat√°logo b√°sico com qualidade HD', 19.90, 'monthly', false),
('VIP Mensal', 'Acesso completo incluindo conte√∫do VIP e qualidade 4K', 39.90, 'monthly', true),
('B√°sico Trimestral', 'Acesso ao cat√°logo b√°sico com qualidade HD (3 meses)', 49.90, 'quarterly', false),
('VIP Trimestral', 'Acesso completo incluindo conte√∫do VIP e qualidade 4K (3 meses)', 99.90, 'quarterly', true);

-- Insert default categories
INSERT INTO public.categories (name, description) VALUES
('Filmes', 'Filmes de diversos g√™neros'),
('S√©ries', 'S√©ries e temporadas completas'),
('Document√°rios', 'Document√°rios educativos e informativos'),
('Canais', 'Conte√∫do de canais e creators'),
('Infantil', 'Conte√∫do adequado para crian√ßas'),
('A√ß√£o', 'Filmes e s√©ries de a√ß√£o'),
('Drama', 'Dramas e melodramas'),
('Com√©dia', 'Com√©dias e humor'),
('Terror', 'Filmes de terror e suspense'),
('Fic√ß√£o Cient√≠fica', 'Sci-fi e fantasia');

-- Create function to handle user registration
CREATE OR REPLACE FUNCTION public.handle_new_user()
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO public.profiles (id, email, full_name)
    VALUES (NEW.id, NEW.email, NEW.raw_user_meta_data->>'full_name');
    RETURN NEW;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- Create trigger for new user registration
CREATE TRIGGER on_auth_user_created
    AFTER INSERT ON auth.users
    FOR EACH ROW EXECUTE FUNCTION public.handle_new_user();
```

Este SQL criar√° toda a estrutura necess√°ria para o funcionamento do StreamFlix!

## üéâ Conclus√£o

O StreamFlix √© uma plataforma completa de streaming que oferece:

- ‚úÖ Sistema robusto de autentica√ß√£o e autoriza√ß√£o
- ‚úÖ Gerenciamento flex√≠vel de conte√∫do
- ‚úÖ Suporte a m√∫ltiplas fontes de v√≠deo
- ‚úÖ Interface moderna e responsiva
- ‚úÖ Funcionalidades PWA
- ‚úÖ Painel administrativo completo

Perfeito para criar sua pr√≥pria plataforma de streaming! üöÄ
